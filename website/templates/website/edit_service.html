{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Service | Propulsion Technology</title>
    <link rel="icon" type="image/png" href="{% static 'img/logo.png'%}">
    <script src="https://cdn.tailwindcss.com"></script>
    
</head>
<body class="bg-[#EAF4E0] font-sans text-[#053830]">

    <!-- Navbar -->
    <nav class="bg-[#053830] text-white p-5 flex justify-between items-center shadow-lg">
        <h1 class="text-2xl font-bold">Edit Service</h1>
        <div>
            <a href="{% url 'manage_services' %}" class="text-[#FF9728] font-semibold hover:text-white mr-6">Back to Services</a>
            <a href="{% url 'admin_logout' %}" class="bg-[#FF9728] text-[#053830] px-4 py-2 rounded-xl font-semibold hover:bg-white hover:text-[#053830] transition-all">Logout</a>
        </div>
    </nav>

    <!-- Edit Service Form -->
    <main class="max-w-3xl mx-auto mt-10 p-6 bg-white rounded-3xl shadow-2xl">
        <h2 class="text-3xl font-extrabold mb-6 text-center">Edit {{ service.title }}</h2>

        <form method="POST" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            <!-- Title -->
            <div>
                <label for="title" class="block font-semibold mb-2">Title</label>
                <input type="text" id="title" name="title" value="{{ service.title }}" required
                    class="w-full border border-gray-300 rounded-xl px-4 py-2 focus:ring-2 focus:ring-[#053830] focus:border-[#053830] transition-all">
            </div>

            <!-- Short Description -->
            <div>
                <label for="description" class="block font-semibold mb-2">Short Description</label>
                <textarea id="description" name="description" rows="3" required
                    class="w-full border border-gray-300 rounded-xl px-4 py-2 focus:ring-2 focus:ring-[#053830] focus:border-[#053830] transition-all">{{ service.description }}</textarea>
            </div>

            <!-- Full Description -->
            <div>
                <label for="full_description" class="block font-semibold mb-2">Full Description</label>
                <textarea id="full_description" name="full_description" rows="5"
                    class="w-full border border-gray-300 rounded-xl px-4 py-2 focus:ring-2 focus:ring-[#053830] focus:border-[#053830] transition-all">{{ service.full_description }}</textarea>
            </div>

            <!-- Icon and Color -->
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label for="icon" class="block font-semibold mb-2">Icon (Emoji)</label>
                    <input type="text" id="icon" name="icon" value="{{ service.icon }}"
                        class="w-full border border-gray-300 rounded-xl px-4 py-2 focus:ring-2 focus:ring-[#053830] focus:border-[#053830] transition-all">
                </div>

                <div>
                    <label for="color" class="block font-semibold mb-2">Color</label>
                    <select id="color" name="color"
                        class="w-full border border-gray-300 rounded-xl px-4 py-2 focus:ring-2 focus:ring-[#053830] focus:border-[#053830] transition-all">
                        <option value="accent-green" {% if service.color == 'accent-green' %}selected{% endif %}>Accent Green</option>
                        <option value="highlight-gold" {% if service.color == 'highlight-gold' %}selected{% endif %}>Highlight Gold</option>
                        <option value="card-bg" {% if service.color == 'card-bg' %}selected{% endif %}>Card Background</option>
                        <option value="white" {% if service.color == 'white' %}selected{% endif %}>White</option>
                    </select>
                </div>
            </div>

            <!-- Order -->
            <div>
                <label for="order" class="block font-semibold mb-2">Order</label>
                <input type="number" id="order" name="order" value="{{ service.order }}" min="0"
                    class="w-full border border-gray-300 rounded-xl px-4 py-2 focus:ring-2 focus:ring-[#053830] focus:border-[#053830] transition-all">
            </div>

            <!-- Service Image -->
            <div>
                <label for="image" class="block font-semibold mb-2">Service Image</label>
                {% if service.image %}
                    <img src="{{ service.image.url }}" alt="Current Image" class="h-32 rounded-lg mb-3 border">
                {% endif %}
                <input type="file" id="image" name="image" accept="image/*"
                    class="w-full border border-gray-300 rounded-xl px-4 py-2 bg-white">
            </div>

            <!-- Slug -->
            <div>
                <label for="slug" class="block font-semibold mb-2">Slug</label>
                <input type="text" id="slug" name="slug" value="{{ service.slug }}" readonly
                    class="w-full border border-gray-300 rounded-xl px-4 py-2 bg-gray-100 text-gray-600">
            </div>

            <!-- Update Button -->
            <div class="flex justify-center mt-6">
                <button type="submit"
                    class="bg-[#053830] text-white px-8 py-3 rounded-xl font-semibold hover:bg-[#FF9728] hover:text-[#053830] transition-all shadow-lg shadow-[#053830]/40 transform hover:scale-[1.02] hover:-translate-y-1">
                    Update Service
                </button>
            </div>
        </form>
    </main>

    <script>
        // Auto-generate slug on title edit
        document.getElementById('title').addEventListener('input', function() {
            const title = this.value.toLowerCase().trim();
            document.getElementById('slug').value = title.replace(/[^a-z0-9]+/g, '-');
        });
    </script>

</body>
</html>
