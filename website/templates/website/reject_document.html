{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reject Submission | {{ project.project_name }}</title>
    
    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Theme Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ["Outfit", "sans-serif"] },
                    colors: {
                        "primary": "#053830",
                        "primary-dark": "#022c25",
                        "accent": "#FF9728",
                        "surface": "#F8FAFC",
                        "danger": "#e11d48", // Added for rejection button
                        "danger-dark": "#be123c",
                    },
                    boxShadow: {
                        'soft': '0 10px 40px -10px rgba(0,0,0,0.08)',
                        'glow': '0 0 20px rgba(255, 151, 40, 0.3)'
                    }
                }
            }
        }
    </script>

    <style>
        .animate-enter {
            animation: enter 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
            opacity: 0;
            transform: translateY(20px);
        }
        @keyframes enter {
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Toast Animation */
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        .animate-slide-in-right {
            animation: slideInRight 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }

        .delay-100 { animation-delay: 0.1s; }
        
        /* Custom form styling */
        .form-input:focus-within {
            border-color: #e11d48; /* Red border on focus for rejection */
            box-shadow: 0 0 0 4px rgba(225, 29, 72, 0.1);
        }
    </style>
</head>

<body class="bg-surface min-h-screen text-slate-800 font-sans">

    <!-- HERO HEADER SECTION -->
    <div class="relative bg-gradient-to-r from-primary-dark via-primary to-primary-dark pb-32 pt-10 px-6 shadow-lg overflow-hidden">
        <!-- Decorative Background Elements -->
        <div class="absolute top-0 right-0 w-96 h-96 bg-white opacity-5 rounded-full blur-3xl -mr-20 -mt-20 pointer-events-none"></div>
        <div class="absolute bottom-0 left-0 w-64 h-64 bg-accent opacity-5 rounded-full blur-3xl -ml-20 -mb-10 pointer-events-none"></div>

        <div class="max-w-3xl mx-auto relative z-10">
            <!-- Navigation -->
            <nav class="flex items-center justify-between mb-8">
                <a href="javascript:history.back()" class="group flex items-center text-white/70 hover:text-white transition-colors text-sm font-medium bg-white/10 hover:bg-white/20 px-4 py-2 rounded-full backdrop-blur-sm">
                    <i data-lucide="arrow-left" class="w-4 h-4 mr-2 transition-transform group-hover:-translate-x-1"></i>
                    Back
                </a>
                
                <div class="px-3 py-1 bg-rose-500/20 border border-rose-500/30 rounded-full text-xs text-rose-100 font-medium flex items-center gap-2">
                    <span class="w-1.5 h-1.5 rounded-full bg-rose-500 animate-pulse"></span>
                    Admin Review
                </div>
            </nav>

            <!-- Title -->
            <div class="animate-enter text-center md:text-left">
                <p class="text-rose-400 text-sm font-bold uppercase tracking-wider mb-2 flex items-center justify-center md:justify-start gap-2">
                    <i data-lucide="shield-alert" class="w-4 h-4"></i> Action Required
                </p>
                <h1 class="text-4xl md:text-5xl font-bold text-white tracking-tight leading-tight">
                    Reject Submission
                </h1>
                <p class="text-slate-300 mt-2 text-lg">
                    You are rejecting an item for <span class="text-white font-medium">{{ project.project_name }}</span>
                </p>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT (Floating Negative Margin) -->
    <div class="max-w-3xl mx-auto px-6 -mt-20 relative z-20 pb-20">
        
        <!-- CARD -->
        <div class="bg-white rounded-3xl shadow-soft border border-slate-100 overflow-hidden animate-enter delay-100">
            
            <!-- Context Banner -->
            <div class="bg-rose-50 border-b border-rose-100 p-6 flex items-start gap-4">
                <div class="p-2 bg-rose-100 rounded-full shrink-0">
                    <i data-lucide="alert-triangle" class="w-5 h-5 text-rose-600"></i>
                </div>
                <div>
                    <h3 class="text-rose-900 font-semibold text-sm">Please provide a reason</h3>
                    <p class="text-rose-700/80 text-xs mt-1">This explanation will be sent to the user so they can correct their submission.</p>
                </div>
            </div>

            <!-- FORM -->
            <div class="p-8">
                <form method="POST" class="space-y-6">
                    {% csrf_token %}
                    
                    <!-- Reason Textarea -->
                    <div class="space-y-2">
                        <label class="text-xs font-bold text-slate-500 uppercase tracking-wider flex items-center gap-1">
                            Rejection Reason <span class="text-rose-500">*</span>
                        </label>
                        <div class="relative group">
                            <textarea name="reason" required rows="6"
                                      class="w-full p-4 bg-slate-50 border border-slate-200 rounded-xl text-slate-700 text-lg font-medium placeholder:text-slate-400 focus:outline-none focus:bg-white focus:ring-2 focus:ring-rose-500/10 focus:border-rose-500 transition-all resize-none form-input"
                                      placeholder="e.g., The documents provided are blurry or invalid..."></textarea>
                            
                            <!-- Helper corner icon -->
                            <div class="absolute right-4 bottom-4 pointer-events-none">
                                <i data-lucide="edit-3" class="w-4 h-4 text-slate-300"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="pt-4 flex items-center gap-4">
                        <button type="button" onclick="history.back()" class="px-6 py-3.5 rounded-xl border border-slate-200 text-slate-600 font-medium hover:bg-slate-50 transition-colors">
                            Cancel
                        </button>
                        
                        <!-- Submit Button (Red/Danger theme) -->
                        <button type="submit" 
                                class="flex-1 bg-danger hover:bg-danger-dark text-white px-6 py-3.5 rounded-xl font-semibold shadow-lg shadow-rose-500/20 hover:shadow-rose-500/40 transition-all flex items-center justify-center gap-2 group">
                            <i data-lucide="x-circle" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                            Confirm Rejection
                        </button>
                    </div>

                </form>
            </div>
        </div>
        
    </div>

    <!-- TOAST NOTIFICATIONS (Standard Django Messages) -->
    {% if messages %}
    <div id="toast-container" class="fixed top-6 right-6 z-50 flex flex-col gap-3 pointer-events-none">
        {% for message in messages %}
        <div class="pointer-events-auto w-80 bg-white rounded-2xl shadow-2xl border border-slate-100 p-4 flex items-start gap-4 animate-slide-in-right">
            <!-- Icon -->
            <div class="shrink-0 p-2 rounded-full {% if message.tags == 'error' %}bg-rose-50 text-rose-500{% else %}bg-emerald-50 text-emerald-500{% endif %}">
                {% if message.tags == 'error' %}
                <i data-lucide="alert-circle" class="w-5 h-5"></i>
                {% else %}
                <i data-lucide="check-circle-2" class="w-5 h-5"></i>
                {% endif %}
            </div>
            
            <!-- Content -->
            <div class="flex-1 pt-0.5">
                <h4 class="text-sm font-bold text-slate-800">
                    {% if message.tags == 'error' %}Action Failed{% else %}Success{% endif %}
                </h4>
                <p class="text-xs text-slate-500 mt-1 leading-relaxed">{{ message }}</p>
            </div>

            <!-- Close Button -->
            <button onclick="this.closest('div').remove()" class="text-slate-400 hover:text-slate-600 transition-colors p-1">
                <i data-lucide="x" class="w-4 h-4"></i>
            </button>
        </div>
        {% endfor %}
    </div>

    <script>
        // Auto-dismiss toasts after 5 seconds
        document.addEventListener('DOMContentLoaded', () => {
            const toasts = document.querySelectorAll('#toast-container > div');
            if(toasts.length > 0) {
                setTimeout(() => {
                    toasts.forEach(toast => {
                        toast.style.transition = 'all 0.5s ease';
                        toast.style.opacity = '0';
                        toast.style.transform = 'translateX(20px)';
                        setTimeout(() => toast.remove(), 500);
                    });
                }, 5000);
            }
        });
    </script>
    {% endif %}

    <script>
        lucide.createIcons();
    </script>
</body>
</html>